<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELGOOG-HUB - Watch Movies & TV Shows</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300 ;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            font-family: 'Inter', sans-serif;
            background: #0f0f0f;
            color: #fff;
            overflow-x: hidden;
            cursor: none !important;
        }
        
        /* Force hide default cursor on ALL elements */
        *, *::before, *::after {
            cursor: none !important;
        }
        
        /* Custom Cursor - FIXED SPEED */
        #custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            border: 2px solid #e50914;
            border-radius: 50%;
            pointer-events: none;
            z-index: 99999;
            transition: transform 0.1s, background 0.2s, width 0.2s, height 0.2s;
            transform: translate(-50%, -50%);
            background: transparent;
        }
        
        #custom-cursor.hover {
            transform: translate(-50%, -50%) scale(1.5);
            background: rgba(229, 9, 20, 0.3);
            width: 30px;
            height: 30px;
        }
        
        /* Intro */
        #intro-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.8s ease;
        }
        
        #intro-container.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .netflix-intro {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .netflix-logo {
            position: relative;
            width: 600px;
            height: 600px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .netflix-text {
            font-size: 180px;
            font-weight: 900;
            color: #e50914;
            letter-spacing: -10px;
            text-transform: uppercase;
            animation: netflixZoom 4s ease-in-out forwards;
            text-shadow: 0 0 100px rgba(229, 9, 20, 0.8);
            opacity: 0;
        }
        
        @keyframes netflixZoom {
            0% {
                opacity: 0;
                transform: scale(3);
                filter: blur(20px);
            }
            20% {
                opacity: 1;
                transform: scale(1);
                filter: blur(0);
            }
            80% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0.8);
            }
        }
        
        .intro-flash {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            opacity: 0;
            pointer-events: none;
        }
        
        .intro-flash.active {
            animation: flashEffect 0.3s ease;
        }
        
        @keyframes flashEffect {
            0%, 100% { opacity: 0; }
            50% { opacity: 0.3; }
        }
        
        /* Sign In Modal */
        #signin-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            backdrop-filter: blur(10px);
        }
        
        #signin-modal.active {
            display: flex;
        }
        
        .signin-container {
            background: rgba(20, 20, 20, 0.95);
            padding: 60px;
            border-radius: 8px;
            width: 450px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .signin-container h2 {
            font-size: 32px;
            margin-bottom: 30px;
            font-weight: 700;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group input {
            width: 100%;
            padding: 16px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 16px;
            outline: none;
            transition: background 0.3s;
        }
        
        .form-group input:focus {
            background: #444;
        }
        
        .btn-primary {
            width: 100%;
            padding: 16px;
            background: #e50914;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
        }
        
        .btn-primary:hover {
            background: #f40612;
            transform: scale(1.02);
        }
        
        .btn-secondary {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: #fff;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #fff;
        }
        
        .form-switch {
            text-align: center;
            margin-top: 20px;
            color: #737373;
        }
        
        .form-switch span {
            color: #fff;
            cursor: pointer;
            text-decoration: underline;
        }
        
        /* Header */
        #main-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 20px 4%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
            background: linear-gradient(to bottom, rgba(0,0,0,0.7) 10%, transparent);
            transition: background 0.4s;
        }
        
        #main-header.scrolled {
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .logo {
            font-size: 28px;
            font-weight: 900;
            color: #e50914;
            letter-spacing: -1px;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
            margin-left: 40px;
        }
        
        .nav-links a {
            color: #e5e5e5;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
        }
        
        .nav-links a:hover, .nav-links a.active {
            color: #fff;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .search-container {
            position: relative;
        }
        
        #search-input {
            background: rgba(0, 0, 0, 0.75);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 10px 40px 10px 15px;
            border-radius: 4px;
            width: 250px;
            font-size: 14px;
            outline: none;
            transition: all 0.3s;
        }
        
        #search-input:focus {
            background: rgba(0, 0, 0, 0.9);
            border-color: #fff;
            width: 300px;
        }
        
        .search-autocomplete {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(30, 30, 30, 0.98);
            border-radius: 4px;
            margin-top: 5px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .search-autocomplete.active {
            display: block;
        }
        
        .search-suggestion {
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.2s;
        }
        
        .search-suggestion:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .search-suggestion img {
            width: 40px;
            height: 60px;
            object-fit: cover;
            border-radius: 2px;
        }
        
        .search-suggestion span {
            font-size: 14px;
        }
        
        .profile-menu {
            position: relative;
        }
        
        .profile-btn {
            width: 35px;
            height: 35px;
            border-radius: 4px;
            background: #e50914;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            overflow: hidden;
        }
        
        .profile-btn img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 10px;
            background: rgba(0, 0, 0, 0.95);
            border-radius: 4px;
            padding: 10px 0;
            min-width: 180px;
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .profile-dropdown.active {
            display: block;
        }
        
        .profile-dropdown a {
            display: block;
            padding: 12px 20px;
            color: #fff;
            text-decoration: none;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        .profile-dropdown a:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Main Content */
        #main-content {
            min-height: 100vh;
            padding-top: 70px;
        }
        
        /* Hero Section */
        .hero {
            position: relative;
            height: 80vh;
            display: flex;
            align-items: flex-end;
            padding: 0 4% 150px;
            background-size: cover;
            background-position: center;
        }
        
        .hero::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(to top, #0f0f0f 0%, transparent 50%, rgba(0,0,0,0.3) 100%);
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 600px;
        }
        
        .hero-title {
            font-size: 64px;
            font-weight: 800;
            margin-bottom: 20px;
            line-height: 1.1;
        }
        
        .hero-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .hero-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .hero-meta .match {
            color: #46d369;
            font-weight: 600;
        }
        
        .hero-meta .rating {
            border: 1px solid rgba(255, 255, 255, 0.4);
            padding: 2px 8px;
            font-size: 12px;
        }
        
        .hero-description {
            font-size: 18px;
            line-height: 1.5;
            color: #d2d2d2;
            margin-bottom: 30px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .hero-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn-play {
            background: #fff;
            color: #000;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: opacity 0.3s;
        }
        
        .btn-play:hover {
            opacity: 0.8;
        }
        
        .btn-more {
            background: rgba(109, 109, 110, 0.7);
            color: #fff;
            border: none;
            padding: 12px 30px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.3s;
        }
        
        .btn-more:hover {
            background: rgba(109, 109, 110, 0.9);
        }
        
        /* Content Rows - FIXED SCROLLING */
        .content-row {
            padding: 30px 4%;
            position: relative;
            overflow: hidden;
        }
        
        .row-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .row-title {
            font-size: 20px;
            font-weight: 600;
        }
        
        .row-actions {
            display: flex;
            gap: 10px;
        }
        
        .scroll-btn {
            width: 40px;
            height: 100px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            color: #fff;
            font-size: 24px;
            opacity: 0;
            transition: opacity 0.3s;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .content-row:hover .scroll-btn {
            opacity: 1;
        }
        
        .scroll-btn.prev {
            left: 2%;
        }
        
        .scroll-btn.next {
            right: 2%;
        }
        
        .row-content {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding: 20px 0;
            scrollbar-width: none;
        }
        
        .row-content::-webkit-scrollbar {
            display: none;
        }
        
        /* Movie Card - FIXED WITH GLOW EFFECT */
        .movie-card {
            flex: 0 0 auto;
            width: 240px;
            position: relative;
            transition: transform 0.3s, z-index 0s, box-shadow 0.3s;
            z-index: 1;
            border-radius: 4px;
        }
        
        .movie-card:hover {
            transform: scale(1.4);
            z-index: 100;
            transition-delay: 0.3s;
            box-shadow: 0 0 30px rgba(229, 9, 20, 0.6), 0 0 60px rgba(229, 9, 20, 0.3);
        }
        
        .movie-poster {
            width: 100%;
            height: 135px;
            object-fit: cover;
            border-radius: 4px;
            display: block;
        }
        
        .movie-info {
            display: none;
        }
        
        .movie-title-popup {
            position: fixed;
            background: rgba(0, 0, 0, 0.9);
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 600;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 10001;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .movie-title-popup.visible {
            opacity: 1;
        }
        
        /* Video Player */
        #video-player {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 10000;
            display: none;
        }
        
        #video-player.active {
            display: block;
        }
        
        .video-container {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        #video-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .video-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .video-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 30px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, transparent 100%);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            transform: translateY(-100%);
            transition: transform 0.3s;
        }
        
        .video-overlay.active .video-header {
            transform: translateY(0);
        }
        
        .video-title {
            font-size: 18px;
            font-weight: 600;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 16px;
            border-radius: 4px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .video-close {
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            font-size: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s, transform 0.2s;
        }
        
        .video-close:hover {
            background: rgba(229, 9, 20, 0.9);
            transform: scale(1.1);
        }
        
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 30px;
            background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, transparent 100%);
            transform: translateY(100%);
            transition: transform 0.3s;
        }
        
        .video-overlay.active .video-controls {
            transform: translateY(0);
        }
        
        .progress-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #e50914;
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s;
            position: relative;
        }
        
        .progress-handle {
            position: absolute;
            right: -6px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: #e50914;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            box-shadow: 0 0 10px rgba(229, 9, 20, 0.5);
        }
        
        .progress-bar:hover .progress-handle {
            opacity: 1;
            transform: translateY(-50%) scale(1.2);
        }
        
        .time-display {
            font-size: 14px;
            color: #fff;
            min-width: 100px;
            text-align: center;
            font-family: monospace;
        }
        
        .controls-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .controls-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            padding: 8px;
            transition: transform 0.2s, color 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }
        
        .control-btn:hover {
            transform: scale(1.2);
            color: #e50914;
        }
        
        .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .volume-slider {
            width: 100px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }
        
        .volume-fill {
            height: 100%;
            background: #fff;
            border-radius: 2px;
            width: 70%;
            transition: width 0.1s;
        }
        
        .controls-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .season-selector {
            position: relative;
        }
        
        .season-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.2s;
        }
        
        .season-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .season-dropdown {
            position: absolute;
            bottom: 100%;
            left: 0;
            margin-bottom: 10px;
            background: rgba(30, 30, 30, 0.98);
            border-radius: 4px;
            max-height: 300px;
            overflow-y: auto;
            min-width: 200px;
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .season-dropdown.active {
            display: block;
        }
        
        .season-option {
            padding: 12px 16px;
            transition: background 0.2s;
            font-size: 14px;
            cursor: pointer;
        }
        
        .season-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .season-option.active {
            background: #e50914;
        }
        
        .episodes-panel {
            position: absolute;
            bottom: 100%;
            right: 0;
            margin-bottom: 10px;
            background: rgba(20, 20, 20, 0.98);
            border-radius: 8px;
            max-height: 500px;
            overflow-y: auto;
            width: 450px;
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
        }
        
        .episodes-panel.active {
            display: block;
        }
        
        .episodes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .episodes-header h3 {
            font-size: 18px;
            font-weight: 600;
        }
        
        .close-episodes {
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }
        
        .close-episodes:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .episode-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            transition: background 0.2s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            border-radius: 4px;
        }
        
        .episode-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .episode-item.playing {
            background: rgba(229, 9, 20, 0.2);
            border-left: 3px solid #e50914;
        }
        
        .episode-item img {
            width: 120px;
            height: 68px;
            object-fit: cover;
            border-radius: 4px;
            flex-shrink: 0;
        }
        
        .episode-info {
            flex: 1;
        }
        
        .episode-info h4 {
            font-size: 14px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .episode-info .episode-number {
            color: #999;
            font-weight: 400;
        }
        
        .episode-info .episode-duration {
            color: #999;
            font-size: 12px;
        }
        
        .episode-info p {
            font-size: 13px;
            color: #b3b3b3;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Exit Confirmation */
        #exit-confirm {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10001;
        }
        
        #exit-confirm.active {
            display: flex;
        }
        
        .exit-dialog {
            background: rgba(30, 30, 30, 0.98);
            padding: 40px;
            border-radius: 8px;
            text-align: center;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .exit-dialog h3 {
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .exit-dialog p {
            color: #999;
            margin-bottom: 30px;
        }
        
        .exit-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        /* Notification */
        #notification {
            position: fixed;
            top: 100px;
            right: 30px;
            background: rgba(30, 30, 30, 0.98);
            padding: 20px 30px;
            border-radius: 8px;
            border-left: 4px solid #e50914;
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 10002;
            max-width: 350px;
        }
        
        #notification.active {
            transform: translateX(0);
        }
        
        #notification.success {
            border-left-color: #46d369;
        }
        
        /* Profile Selector */
        #profile-selector {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f0f0f;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9998;
        }
        
        #profile-selector.active {
            display: flex;
        }
        
        .profiles-container {
            text-align: center;
            max-width: 900px;
            width: 100%;
        }
        
        .profiles-container h2 {
            font-size: 48px;
            margin-bottom: 40px;
            font-weight: 400;
        }
        
        .profiles-grid {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .profile-card {
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .profile-card:hover {
            transform: scale(1.05);
        }
        
        .profile-avatar {
            width: 150px;
            height: 150px;
            border-radius: 8px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 72px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-card:hover .profile-avatar {
            border-color: #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .profile-name {
            font-size: 18px;
            color: #999;
            transition: color 0.3s;
        }
        
        .profile-card:hover .profile-name {
            color: #fff;
        }
        
        .add-profile .profile-avatar {
            background: transparent;
            border: 2px dashed #666;
            font-size: 48px;
        }
        
        .add-profile:hover .profile-avatar {
            border-color: #fff;
            background: rgba(255, 255, 255, 0.05);
        }
        
        /* Profile Creation Modal */
        #profile-creation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10003;
        }
        
        #profile-creation-modal.active {
            display: flex;
        }
        
        .profile-creation-container {
            background: #141414;
            padding: 40px;
            border-radius: 8px;
            width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .profile-creation-container h2 {
            font-size: 28px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .profile-name-input {
            width: 100%;
            padding: 16px;
            background: #333;
            border: none;
            border-radius: 4px;
            color: #fff;
            font-size: 16px;
            margin-bottom: 30px;
            outline: none;
        }
        
        .profile-name-input:focus {
            background: #444;
        }
        
        .avatar-selection {
            margin-bottom: 30px;
        }
        
        .avatar-selection h3 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #999;
        }
        
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
        }
        
        .avatar-option {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.2s;
            overflow: hidden;
        }
        
        .avatar-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .avatar-option:hover {
            transform: scale(1.1);
        }
        
        .avatar-option.selected {
            border-color: #e50914;
            box-shadow: 0 0 15px rgba(229, 9, 20, 0.5);
        }
        
        .profile-creation-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        /* Movie Detail Modal */
        #movie-detail {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: flex-start;
            justify-content: center;
            z-index: 9997;
            overflow-y: auto;
            padding: 50px 0;
        }
        
        #movie-detail.active {
            display: flex;
        }
        
        .detail-container {
            max-width: 900px;
            width: 90%;
            background: #181818;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            margin-top: 0;
        }
        
        .detail-header {
            position: relative;
            height: 400px;
            background-size: cover;
            background-position: center;
        }
        
        .detail-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            background: linear-gradient(to top, #181818 0%, transparent 60%);
        }
        
        .detail-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            font-size: 24px;
            border-radius: 50%;
            z-index: 10;
            transition: background 0.3s, transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .detail-close:hover {
            background: rgba(229, 9, 20, 0.9);
            transform: scale(1.1);
        }
        
        .detail-content {
            padding: 40px;
            margin-top: -100px;
            position: relative;
            z-index: 1;
        }
        
        .detail-title {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .detail-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            align-items: center;
        }
        
        .detail-meta span {
            font-size: 14px;
        }
        
        .detail-meta .match {
            color: #46d369;
            font-weight: 600;
        }
        
        .detail-meta .rating {
            border: 1px solid rgba(255, 255, 255, 0.4);
            padding: 2px 8px;
            font-size: 12px;
        }
        
        .detail-description {
            font-size: 16px;
            line-height: 1.6;
            color: #d2d2d2;
            margin-bottom: 30px;
        }
        
        .detail-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .detail-section {
            margin-bottom: 30px;
        }
        
        .detail-section h3 {
            font-size: 20px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .cast-list {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .cast-member {
            text-align: center;
        }
        
        .cast-member img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 8px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .cast-member span {
            font-size: 12px;
            color: #999;
        }
        
        /* Season Selector in Detail */
        .detail-season-selector {
            margin-bottom: 20px;
        }
        
        .detail-season-dropdown {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 12px 20px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            min-width: 200px;
        }
        
        .detail-episodes-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .detail-episode-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .detail-episode-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .detail-episode-item img {
            width: 160px;
            height: 90px;
            object-fit: cover;
            border-radius: 4px;
            flex-shrink: 0;
        }
        
        .detail-episode-info {
            flex: 1;
        }
        
        .detail-episode-info h4 {
            font-size: 16px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .detail-episode-info p {
            font-size: 14px;
            color: #999;
            line-height: 1.4;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 36px;
            }
            
            .movie-card {
                width: 160px;
            }
            
            .movie-card:hover {
                transform: scale(1.2);
            }
            
            .nav-links {
                display: none;
            }
            
            #search-input {
                width: 150px;
            }
            
            #search-input:focus {
                width: 180px;
            }
            
            .profiles-grid {
                flex-wrap: wrap;
            }
            
            .avatar-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .episodes-panel {
                width: 100%;
                right: 0;
                left: 0;
            }
        }
        
        /* Loading */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: #e50914;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px;
            color: #999;
        }
        
        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #fff;
        }
        
        /* Genre Filter */
        .genre-filter {
            display: flex;
            gap: 10px;
            padding: 0 4% 20px;
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .genre-filter::-webkit-scrollbar {
            display: none;
        }
        
        .genre-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 8px 20px;
            border-radius: 20px;
            white-space: nowrap;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .genre-btn:hover, .genre-btn.active {
            background: #fff;
            color: #000;
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div id="custom-cursor"></div>
    
    <!-- Intro -->
    <div id="intro-container">
        <div class="netflix-intro">
            <div class="netflix-logo">
                <div class="netflix-text">ELGOOG-HUB</div>
            </div>
            <div class="intro-flash"></div>
        </div>
    </div>
    
    <!-- Sign In Modal -->
    <div id="signin-modal">
        <div class="signin-container">
            <h2 id="signin-title">Sign In</h2>
            <form id="auth-form">
                <div class="form-group">
                    <input type="email" id="email" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="password" placeholder="Password" required>
                </div>
                <div class="form-group" id="name-group" style="display: none;">
                    <input type="text" id="name" placeholder="Full Name">
                </div>
                <button type="submit" class="btn-primary" id="auth-submit">Sign In</button>
            </form>
            <div class="form-switch">
                <span id="switch-text">New to ELGOOG-HUB?</span> <span id="switch-link">Sign up now</span>.
            </div>
        </div>
    </div>
    
    <!-- Profile Selector -->
    <div id="profile-selector">
        <div class="profiles-container">
            <h2>Who's watching?</h2>
            <div class="profiles-grid" id="profiles-grid"></div>
            <button class="btn-secondary" onclick="manageProfiles()">Manage Profiles</button>
        </div>
    </div>
    
    <!-- Profile Creation Modal -->
    <div id="profile-creation-modal">
        <div class="profile-creation-container">
            <h2>Create Profile</h2>
            <input type="text" class="profile-name-input" id="new-profile-name" placeholder="Profile Name" maxlength="20">
            <div class="avatar-selection">
                <h3>Choose an avatar</h3>
                <div class="avatar-grid" id="avatar-grid"></div>
            </div>
            <div class="profile-creation-buttons">
                <button class="btn-secondary" onclick="cancelProfileCreation()">Cancel</button>
                <button class="btn-primary" onclick="saveNewProfile()" style="width: auto; padding: 12px 40px;">Save</button>
            </div>
        </div>
    </div>
    
    <!-- Main Header -->
    <header id="main-header">
        <div style="display: flex; align-items: center;">
            <div class="logo">ELGOOG-HUB</div>
            <nav class="nav-links">
                <a href="#" class="active" data-section="home">Home</a>
                <a href="#" data-section="tv-shows">TV Shows</a>
                <a href="#" data-section="movies">Movies</a>
                <a href="#" data-section="new">New & Popular</a>
                <a href="#" data-section="my-list">My List</a>
                <a href="#" data-section="continue-watching">Continue Watching</a>
                <a href="#" data-section="watched">Already Watched</a>
            </nav>
        </div>
        <div class="header-right">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Titles, people, genres" autocomplete="off">
                <div class="search-autocomplete" id="search-autocomplete"></div>
            </div>
            <div class="profile-menu">
                <div class="profile-btn" id="profile-btn">U</div>
                <div class="profile-dropdown" id="profile-dropdown">
                    <a href="#" onclick="switchProfile()">Switch Profile</a>
                    <a href="#" onclick="openAccount()">Account</a>
                    <a href="#" onclick="openHelp()">Help Center</a>
                    <a href="#" onclick="signOut()">Sign out of ELGOOG-HUB</a>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main id="main-content">
        <!-- Genre Filter -->
        <div class="genre-filter" id="genre-filter">
            <button class="genre-btn active" data-genre="all">All</button>
            <button class="genre-btn" data-genre="action">Action</button>
            <button class="genre-btn" data-genre="adventure">Adventure</button>
            <button class="genre-btn" data-genre="animation">Animation</button>
            <button class="genre-btn" data-genre="anime">Anime</button>
            <button class="genre-btn" data-genre="comedy">Comedy</button>
            <button class="genre-btn" data-genre="crime">Crime</button>
            <button class="genre-btn" data-genre="documentary">Documentary</button>
            <button class="genre-btn" data-genre="drama">Drama</button>
            <button class="genre-btn" data-genre="fantasy">Fantasy</button>
            <button class="genre-btn" data-genre="horror">Horror</button>
            <button class="genre-btn" data-genre="mystery">Mystery</button>
            <button class="genre-btn" data-genre="reality">Reality</button>
            <button class="genre-btn" data-genre="romance">Romance</button>
            <button class="genre-btn" data-genre="scifi">Sci-Fi</button>
            <button class="genre-btn" data-genre="thriller">Thriller</button>
        </div>
        
        <!-- Hero Section -->
        <div class="hero" id="hero">
            <div class="hero-content">
                <h1 class="hero-title" id="hero-title"></h1>
                <div class="hero-meta" id="hero-meta"></div>
                <p class="hero-description" id="hero-description"></p>
                <div class="hero-buttons">
                    <button class="btn-play" onclick="playHero()">
                        <span>â–¶</span> Play
                    </button>
                    <button class="btn-more" onclick="showHeroDetails()">
                        <span>â„¹</span> More Info
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Content Rows -->
        <div id="content-rows"></div>
    </main>
    
    <!-- Video Player -->
    <div id="video-player">
        <div class="video-container">
            <iframe id="video-iframe" allowfullscreen></iframe>
            <div class="video-overlay" id="video-overlay">
                <div class="video-header">
                    <div class="video-title" id="video-title"></div>
                    <button class="video-close" onclick="confirmExit()">Ã—</button>
                </div>
                <div class="video-controls">
                    <div class="progress-container">
                        <button class="control-btn" onclick="togglePlay()" id="play-pause-btn">â–¶</button>
                        <div class="progress-bar" onclick="seek(event)">
                            <div class="progress-fill" id="progress-fill">
                                <div class="progress-handle"></div>
                            </div>
                        </div>
                        <div class="time-display" id="time-display">0:00 / 0:00</div>
                    </div>
                    <div class="controls-row">
                        <div class="controls-left">
                            <div class="volume-container">
                                <button class="control-btn" onclick="toggleMute()">ðŸ”Š</button>
                                <div class="volume-slider" onclick="setVolume(event)">
                                    <div class="volume-fill" id="volume-fill"></div>
                                </div>
                            </div>
                            <button class="control-btn" onclick="toggleFullscreen()">â›¶</button>
                        </div>
                        <div class="controls-right">
                            <div class="season-selector" id="season-selector" style="display: none;">
                                <button class="season-btn" onclick="toggleSeasonDropdown()">
                                    Season <span id="current-season-display">1</span> â–¼
                                </button>
                                <div class="season-dropdown" id="season-dropdown"></div>
                            </div>
                            <button class="control-btn" onclick="toggleEpisodesPanel()">â˜° Episodes</button>
                        </div>
                    </div>
                </div>
                <!-- Episodes Panel -->
                <div class="episodes-panel" id="episodes-panel">
                    <div class="episodes-header">
                        <h3 id="episodes-panel-title">Episodes</h3>
                        <button class="close-episodes" onclick="toggleEpisodesPanel()">Ã—</button>
                    </div>
                    <div id="episodes-list-container"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Exit Confirmation -->
    <div id="exit-confirm">
        <div class="exit-dialog">
            <h3>Exit Movie?</h3>
            <p>Are you sure you want to exit? Your progress will be saved.</p>
            <div class="exit-buttons">
                <button class="btn-primary" onclick="exitVideo()">Exit</button>
                <button class="btn-secondary" onclick="cancelExit()">Continue Watching</button>
            </div>
        </div>
    </div>
    
    <!-- Movie Detail Modal -->
    <div id="movie-detail">
        <div class="detail-container">
            <div class="detail-header" id="detail-header">
                <button class="detail-close" onclick="closeMovieDetail()">Ã—</button>
            </div>
            <div class="detail-content">
                <h1 class="detail-title" id="detail-title"></h1>
                <div class="detail-meta" id="detail-meta"></div>
                <p class="detail-description" id="detail-description"></p>
                <div class="detail-buttons">
                    <button class="btn-play" onclick="playDetail()">
                        <span>â–¶</span> Play
                    </button>
                    <button class="btn-more" onclick="addToList()">
                        <span>+</span> My List
                    </button>
                </div>
                <div class="detail-section">
                    <h3>Cast</h3>
                    <div class="cast-list" id="cast-list"></div>
                </div>
                <div class="detail-section" id="episodes-section" style="display: none;">
                    <h3>Episodes</h3>
                    <div class="detail-season-selector">
                        <select class="detail-season-dropdown" id="detail-season-dropdown" onchange="changeDetailSeason()">
                        </select>
                    </div>
                    <div class="detail-episodes-list" id="detail-episodes-list"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div id="notification"></div>
    
    <!-- Movie Title Popup -->
    <div class="movie-title-popup" id="movie-title-popup"></div>

    <script>
        // ============================================
        // PROFILE AVATARS
        // ============================================
        
        const profileAvatars = [
            'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1599566150163-29194dcaad36?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1527980965255-d3b416303d12?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1531427186611-ecfd6d936c79?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1580489944761-15a19d654956?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop ',
            'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=150&h=150&fit=crop '
        ];

        // ============================================
        // YOUR MOVIE DATA - FULLY INTEGRATED
        // ============================================
        
        const movieData = {
            "trendingNow": [
                {
                    "id": "trending1",
                    "title": "Dune: Part Two",
                    "type": "movie",
                    "year": 2024,
                    "rating": "PG-13",
                    "duration": "2h 46m",
                    "match": 98,
                    "genres": ["scifi", "adventure", "action"],
                    "description": "Paul Atreides unites with Chani and the Fremen while on a warpath of revenge against the conspirators who destroyed his family.",
                    "poster": "https://image.tmdb.org/t/p/w500/1pdfLvkbY9ohJlCjQH2CZjjYVvJ.jpg ",
                    "backdrop": "https://image.tmdb.org/t/p/original/xOMo8BRK7PfcJv9JCnx7s5hj0PX.jpg ",
                    "videoUrl": "YOUR_GOOGLE_DRIVE_URL_HERE"
                },
                {
                    "id": "trending2",
                    "title": "The Witcher Season 4",
                    "type": "tv",
                    "year": 2024,
                    "rating": "TV-MA",
                    "seasons": 4,
                    "match": 96,
                    "genres": ["fantasy", "action", "adventure"],
                    "description": "Geralt of Rivia, a solitary monster hunter, struggles to find his place in a world where people often prove more wicked than beasts.",
                    "poster": "https://image.tmdb.org/t/p/w500/cZ0d3rttwXP955b2Q10sP77cUJN.jpg ",
                    "backdrop": "https://image.tmdb.org/t/p/original/pc3A2jbh8jhnr7nNnMB2dX7P7AL.jpg ",
                    "videoUrl": "YOUR_GOOGLE_DRIVE_URL_HERE",
                    "episodes": {
                        "season1": [
                            {"episode": 1, "title": "The End's Beginning", "duration": "61m", "description": "Hostile townsfolk and a cunning mage greet Geralt in the town of Blaviken. Ciri finds her royal world upended when Nilfgaard sets its sights on Cintra.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode1.jpg "},
                            {"episode": 2, "title": "Four Marks", "duration": "60m", "description": "Bullied and neglected, Yennefer accidentally finds a means of escape. Geralt hunts a monster plaguing a village.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode2.jpg "},
                            {"episode": 3, "title": "Betrayer Moon", "duration": "67m", "description": "Geralt takes on another Witcher's unfinished business in a kingdom stalked by a ferocious beast.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode3.jpg "},
                            {"episode": 4, "title": "Of Banquets, Bastards and Burials", "duration": "62m", "description": "Against his better judgment, Geralt accompanies Jaskier to a royal ball. Ciri wanders into an enchanted forest.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode4.jpg "},
                            {"episode": 5, "title": "Bottled Appetites", "duration": "59m", "description": "Heedless of warnings, Yennefer looks for a cure to remove her beauty. Geralt and Jaskier encounter a djinn.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode5.jpg "}
                        ],
                        "season2": [
                            {"episode": 1, "title": "A Grain of Truth", "duration": "63m", "description": "Geralt sets off with Ciri on a journey that leads him to an old friend. After the Battle of Sodden, Tissaia shows no mercy in her search for information.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode1.jpg "},
                            {"episode": 2, "title": "Kaer Morhen", "duration": "60m", "description": "Geralt takes Ciri to his childhood home of Kaer Morhen. There, the mysterious Triss arrives and begins to train Ciri.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode2.jpg "},
                            {"episode": 3, "title": "What Is Lost", "duration": "64m", "description": "Geralt's patience is tested as he trains Ciri. Fringilla assumes a new position. Yennefer struggles to find her place.", "thumbnail": "https://image.tmdb.org/t/p/w500/episode3.jpg "}
                        ]
                    }
                }
            ],
            "popularMovies": [],
            "popularTVShows": [],
            "newReleases": [],
            "top10": [],
            "actionAdventure": [],
            "comedy": [],
            "horror": [],
            "scifi": [],
            "drama": [],
            "anime": [],
            "documentaries": [],
            "reality": [],
            "romance": [],
            "thriller": [],
            "crime": [],
            "fantasy": [],
            "animation": [],
            "mystery": [],
            "family": [],
            "upcomingTitles": [],
            "recommendedForYou": [],
            "continueWatching": [],
            "alreadyWatched": []
        };

        // ============================================
        // APPLICATION STATE
        // ============================================
        
        let currentUser = null;
        let currentProfile = null;
        let currentHero = null;
        let currentVideo = null;
        let isPlaying = false;
        let mouseTimer = null;
        let videoProgress = 0;
        let currentDetailMovie = null;
        let currentSeason = 1;
        let selectedAvatar = null;
        
        // Profile-specific data storage
        function getProfileDataKey(key) {
            if (!currentProfile) return null;
            return `profile_${currentProfile.id}_${key}`;
        }
        
        function getProfileData(key, defaultValue = []) {
            const dataKey = getProfileDataKey(key);
            if (!dataKey) return defaultValue;
            const data = localStorage.getItem(dataKey);
            return data ? JSON.parse(data) : defaultValue;
        }
        
        function setProfileData(key, value) {
            const dataKey = getProfileDataKey(key);
            if (!dataKey) return;
            localStorage.setItem(dataKey, JSON.stringify(value));
        }
        
        // ============================================
        // CUSTOM CURSOR - FIXED SPEED
        // ============================================
        
        const cursor = document.getElementById('custom-cursor');
        let cursorX = 0, cursorY = 0;
        let targetX = 0, targetY = 0;
        
        document.addEventListener('mousemove', (e) => {
            targetX = e.clientX;
            targetY = e.clientY;
        });
        
        function animateCursor() {
            cursorX += (targetX - cursorX) * 0.4;
            cursorY += (targetY - cursorY) * 0.4;
            cursor.style.left = cursorX + 'px';
            cursor.style.top = cursorY + 'px';
            requestAnimationFrame(animateCursor);
        }
        animateCursor();
        
        function addCursorHover() {
            const interactiveElements = document.querySelectorAll('a, button, .movie-card, .profile-card, .search-suggestion, .genre-btn, .scroll-btn, input, .avatar-option, .season-option, .episode-item');
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
                el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
            });
        }
        
        // ============================================
        // INTRO SEQUENCE
        // ============================================
        
        function playIntro() {
            const intro = document.getElementById('intro-container');
            
            try {
                const audio = new Audio('https://www.soundjay.com/misc/sounds-767.mp3 ');
                audio.volume = 0.5;
                audio.play().catch(() => {});
            } catch(e) {}
            
            setTimeout(() => {
                document.querySelector('.intro-flash').classList.add('active');
            }, 3000);
            
            setTimeout(() => {
                intro.classList.add('hidden');
                setTimeout(() => {
                    intro.style.display = 'none';
                    showSignIn();
                }, 800);
            }, 4000);
        }
        
        // ============================================
        // AUTHENTICATION
        // ============================================
        
        function showSignIn() {
            document.getElementById('signin-modal').classList.add('active');
        }
        
        let isSignUp = false;
        
        document.getElementById('switch-link').addEventListener('click', () => {
            isSignUp = !isSignUp;
            document.getElementById('signin-title').textContent = isSignUp ? 'Sign Up' : 'Sign In';
            document.getElementById('auth-submit').textContent = isSignUp ? 'Sign Up' : 'Sign In';
            document.getElementById('switch-text').textContent = isSignUp ? 'Already have an account?' : 'New to ELGOOG-HUB?';
            document.getElementById('switch-link').textContent = isSignUp ? 'Sign in now' : 'Sign up now';
            document.getElementById('name-group').style.display = isSignUp ? 'block' : 'none';
        });
        
        document.getElementById('auth-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const name = document.getElementById('name').value;
            
            if (isSignUp) {
                currentUser = { 
                    email, 
                    name: name || email.split('@')[0], 
                    profiles: [],
                    createdAt: new Date().toISOString()
                };
                localStorage.setItem('user', JSON.stringify(currentUser));
                showNotification('Account created successfully!', 'success');
            } else {
                const saved = localStorage.getItem('user');
                if (saved) {
                    currentUser = JSON.parse(saved);
                    if (currentUser.email !== email) {
                        showNotification('Invalid credentials', 'error');
                        return;
                    }
                } else {
                    currentUser = { email, name: email.split('@')[0], profiles: [] };
                }
                showNotification('Welcome back!', 'success');
            }
            
            document.getElementById('signin-modal').classList.remove('active');
            showProfileSelector();
        });
        
        // ============================================
        // PROFILE SELECTOR
        // ============================================
        
        function showProfileSelector() {
            const selector = document.getElementById('profile-selector');
            const grid = document.getElementById('profiles-grid');
            grid.innerHTML = '';
            
            if (currentUser.profiles.length === 0) {
                // Create default profile
                const defaultProfile = {
                    id: Date.now().toString(),
                    name: currentUser.name || 'Profile 1',
                    avatar: profileAvatars[0],
                    createdAt: new Date().toISOString()
                };
                currentUser.profiles.push(defaultProfile);
                localStorage.setItem('user', JSON.stringify(currentUser));
            }
            
            currentUser.profiles.forEach(profile => {
                const card = document.createElement('div');
                card.className = 'profile-card';
                card.innerHTML = `
                    <div class="profile-avatar">
                        <img src="${profile.avatar}" alt="${profile.name}">
                    </div>
                    <div class="profile-name">${profile.name}</div>
                `;
                card.onclick = () => selectProfile(profile);
                grid.appendChild(card);
            });
            
            const addCard = document.createElement('div');
            addCard.className = 'profile-card add-profile';
            addCard.innerHTML = `
                <div class="profile-avatar">+</div>
                <div class="profile-name">Add Profile</div>
            `;
            addCard.onclick = showProfileCreation;
            grid.appendChild(addCard);
            
            selector.classList.add('active');
            addCursorHover();
        }
        
        function selectProfile(profile) {
            currentProfile = profile;
            document.getElementById('profile-selector').classList.remove('active');
            
            // Update profile button in header
            const profileBtn = document.getElementById('profile-btn');
            profileBtn.innerHTML = `<img src="${profile.avatar}" alt="${profile.name}">`;
            
            initApp();
        }
        
        function showProfileCreation() {
            const modal = document.getElementById('profile-creation-modal');
            const grid = document.getElementById('avatar-grid');
            document.getElementById('new-profile-name').value = '';
            
            grid.innerHTML = '';
            profileAvatars.forEach((avatar, index) => {
                const div = document.createElement('div');
                div.className = 'avatar-option';
                div.innerHTML = `<img src="${avatar}" alt="Avatar ${index + 1}">`;
                div.onclick = () => selectAvatar(div, avatar);
                grid.appendChild(div);
            });
            
            // Select first avatar by default
            if (grid.children[0]) {
                selectAvatar(grid.children[0], profileAvatars[0]);
            }
            
            modal.classList.add('active');
            addCursorHover();
        }
        
        function selectAvatar(element, avatarUrl) {
            document.querySelectorAll('.avatar-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            selectedAvatar = avatarUrl;
        }
        
        function saveNewProfile() {
            const name = document.getElementById('new-profile-name').value.trim();
            if (!name) {
                showNotification('Please enter a profile name', 'error');
                return;
            }
            
            if (currentUser.profiles.length >= 5) {
                showNotification('Maximum 5 profiles allowed', 'error');
                return;
            }
            
            const newProfile = {
                id: Date.now().toString(),
                name: name,
                avatar: selectedAvatar || profileAvatars[0],
                createdAt: new Date().toISOString()
            };
            
            currentUser.profiles.push(newProfile);
            localStorage.setItem('user', JSON.stringify(currentUser));
            
            document.getElementById('profile-creation-modal').classList.remove('active');
            showProfileSelector();
            showNotification('Profile created successfully!', 'success');
        }
        
        function cancelProfileCreation() {
            document.getElementById('profile-creation-modal').classList.remove('active');
        }
        
        function switchProfile() {
            document.getElementById('profile-dropdown').classList.remove('active');
            showProfileSelector();
        }
        
        function manageProfiles() {
            showNotification('Profile management coming soon!', 'info');
        }
        
        // ============================================
        // APP INITIALIZATION
        // ============================================
        
        function initApp() {
            renderHero();
            renderContentRows();
            setupEventListeners();
            addCursorHover();
        }
        
        // ============================================
        // HERO SECTION
        // ============================================
        
        function renderHero() {
            const trending = movieData.trendingNow;
            currentHero = trending[Math.floor(Math.random() * trending.length)];
            
            const hero = document.getElementById('hero');
            hero.style.backgroundImage = `url(${currentHero.backdrop})`;
            
            document.getElementById('hero-title').textContent = currentHero.title;
            document.getElementById('hero-meta').innerHTML = `
                <span class="match">${currentHero.match}% Match</span>
                <span>${currentHero.year}</span>
                <span class="rating">${currentHero.rating}</span>
                <span>${currentHero.duration || (currentHero.seasons + ' Seasons')}</span>
            `;
            document.getElementById('hero-description').textContent = currentHero.description;
        }
        
        function playHero() {
            playVideo(currentHero);
        }
        
        function showHeroDetails() {
            showMovieDetail(currentHero);
        }
        
        // ============================================
        // CONTENT ROWS
        // ============================================
        
        function renderContentRows() {
            const container = document.getElementById('content-rows');
            container.innerHTML = '';
            
            const continueWatching = getProfileData('continueWatching');
            
            // Add Continue Watching if exists
            if (continueWatching.length > 0) {
                const row = createContentRow('Continue Watching', continueWatching, true);
                container.appendChild(row);
            }
            
            const sections = [
                { title: 'Trending Now', data: movieData.trendingNow },
                { title: 'Popular Movies', data: movieData.popularMovies },
                { title: 'Popular TV Shows', data: movieData.popularTVShows },
                { title: 'New Releases', data: movieData.newReleases },
                { title: 'Top 10 in Your Country', data: movieData.top10 },
                { title: 'Action & Adventure', data: movieData.actionAdventure },
                { title: 'Comedy', data: movieData.comedy },
                { title: 'Horror', data: movieData.horror },
                { title: 'Sci-Fi', data: movieData.scifi },
                { title: 'Drama', data: movieData.drama },
                { title: 'Anime', data: movieData.anime },
                { title: 'Documentaries', data: movieData.documentaries },
                { title: 'Reality TV', data: movieData.reality },
                { title: 'Romance', data: movieData.romance },
                { title: 'Thriller', data: movieData.thriller },
                { title: 'Crime', data: movieData.crime },
                { title: 'Fantasy', data: movieData.fantasy },
                { title: 'Animation', data: movieData.animation },
                { title: 'Mystery', data: movieData.mystery },
                { title: 'Family', data: movieData.family }
            ];
            
            sections.forEach(section => {
                if (section.data.length === 0) return;
                const row = createContentRow(section.title, section.data);
                container.appendChild(row);
            });
            
            setTimeout(addCursorHover, 100);
        }
        
        function createContentRow(title, data, isContinue = false) {
            const row = document.createElement('div');
            row.className = 'content-row';
            row.innerHTML = `
                <div class="row-header">
                    <h2 class="row-title">${title}</h2>
                </div>
                <button class="scroll-btn prev">â€¹</button>
                <div class="row-content">
                    ${data.map(item => createMovieCard(item, isContinue)).join('')}
                </div>
                <button class="scroll-btn next">â€º</button>
            `;
            
            const prevBtn = row.querySelector('.scroll-btn.prev');
            const nextBtn = row.querySelector('.scroll-btn.next');
            const rowContent = row.querySelector('.row-content');
            
            prevBtn.addEventListener('click', () => {
                rowContent.scrollBy({ left: -1000, behavior: 'smooth' });
            });
            
            nextBtn.addEventListener('click', () => {
                rowContent.scrollBy({ left: 1000, behavior: 'smooth' });
            });
            
            return row;
        }
        
        // ============================================
        // MOVIE CARD
        // ============================================
        
        function createMovieCard(movie, isContinue = false) {
            const progress = isContinue ? (movie.progress || 0) : 0;
            return `
                <div class="movie-card" data-movie-id="${movie.id}" 
                     onmouseenter="showTitlePopup(event, '${movie.title.replace(/'/g, "\\'")}')" 
                     onmouseleave="hideTitlePopup()">
                    <img class="movie-poster" src="${movie.poster}" alt="${movie.title}" loading="lazy" onclick="handleMovieClick('${movie.id}')">
                    ${progress > 0 ? `<div style="position: absolute; bottom: 0; left: 0; right: 0; height: 4px; background: rgba(255,255,255,0.3); z-index: 2;">
                        <div style="width: ${progress}%; height: 100%; background: #e50914;"></div>
                    </div>` : ''}
                </div>
            `;
        }
        
        // ============================================
        // MOVIE INTERACTION
        // ============================================
        
        function handleMovieClick(movieId) {
            const allMovies = getAllMovies();
            const movie = allMovies.find(m => m.id === movieId);
            if (movie) {
                showMovieDetail(movie);
            }
        }
        
        function playVideoById(movieId) {
            const allMovies = getAllMovies();
            const movie = allMovies.find(m => m.id === movieId);
            if (movie) {
                playVideo(movie);
            }
        }
        
        function getAllMovies() {
            return [
                ...movieData.trendingNow,
                ...movieData.popularMovies,
                ...movieData.popularTVShows,
                ...movieData.newReleases,
                ...movieData.actionAdventure,
                ...movieData.comedy,
                ...movieData.horror,
                ...movieData.scifi,
                ...movieData.drama,
                ...movieData.anime,
                ...movieData.documentaries,
                ...movieData.reality,
                ...movieData.romance,
                ...movieData.thriller,
                ...movieData.crime,
                ...movieData.fantasy,
                ...movieData.animation,
                ...movieData.mystery,
                ...movieData.family
            ];
        }
        
        // ============================================
        // TITLE POPUP
        // ============================================
        
        function showTitlePopup(e, title) {
            const popup = document.getElementById('movie-title-popup');
            popup.textContent = title;
            popup.style.left = (e.clientX + 15) + 'px';
            popup.style.top = (e.clientY - 40) + 'px';
            popup.classList.add('visible');
        }
        
        function hideTitlePopup() {
            document.getElementById('movie-title-popup').classList.remove('visible');
        }
        
        // ============================================
        // VIDEO PLAYER WITH SEASON/EPISODE SELECTION
        // ============================================
        
        let currentEpisodes = {};
        let currentEpisodeIndex = 0;
        
        function playVideo(movie, seasonNum = 1, episodeNum = 1) {
            currentVideo = movie;
            currentDetailMovie = movie;
            currentSeason = seasonNum;
            currentEpisodeIndex = episodeNum - 1;
            
            const player = document.getElementById('video-player');
            const iframe = document.getElementById('video-iframe');
            const overlay = document.getElementById('video-overlay');
            const title = document.getElementById('video-title');
            const seasonSelector = document.getElementById('season-selector');
            
            let videoUrl;
            let displayTitle = movie.title;
            
            // Check if it's a TV show with episodes
            if (movie.type === 'tv' && movie.episodes) {
                currentEpisodes = movie.episodes;
                const seasonKey = `season${seasonNum}`;
                const episodes = movie.episodes[seasonKey];
                
                if (episodes && episodes[episodeNum - 1]) {
                    const episode = episodes[episodeNum - 1];
                    displayTitle = `${movie.title} - S${seasonNum}:E${episodeNum} ${episode.title}`;
                    
                    // Use episode-specific video URL if available, otherwise fallback
                    videoUrl = episode.videoUrl || movie.videoUrl;
                } else {
                    videoUrl = movie.videoUrl;
                }
                
                seasonSelector.style.display = 'block';
                setupSeasonDropdown(movie);
                renderEpisodesPanel(movie, seasonNum);
            } else {
                currentEpisodes = {};
                seasonSelector.style.display = 'none';
                document.getElementById('episodes-panel').classList.remove('active');
                videoUrl = movie.videoUrl;
            }
            
            // Process Google Drive URL
            if (videoUrl && videoUrl !== 'YOUR_GOOGLE_DRIVE_URL_HERE') {
                if (videoUrl.includes('drive.google.com')) {
                    const fileId = videoUrl.match(/[-\w]{25,}/);
                    if (fileId) {
                        videoUrl = `https://drive.google.com/file/d/ ${fileId[0]}/preview`;
                    }
                }
            } else {
                videoUrl = 'about:blank';
            }
            
            iframe.src = videoUrl;
            title.textContent = displayTitle;
            document.getElementById('current-season-display').textContent = seasonNum;
            
            player.classList.add('active');
            overlay.classList.add('active');
            
            setupVideoControls();
            videoProgress = 0;
            updateProgress();
            
            addToContinueWatching(movie, seasonNum, episodeNum);
        }
        
        function setupSeasonDropdown(movie) {
            const dropdown = document.getElementById('season-dropdown');
            dropdown.innerHTML = '';
            
            if (!movie.episodes) return;
            
            const seasonCount = Object.keys(movie.episodes).length;
            
            for (let i = 1; i <= seasonCount; i++) {
                const option = document.createElement('div');
                option.className = 'season-option';
                if (i === currentSeason) option.classList.add('active');
                option.textContent = `Season ${i}`;
                option.onclick = () => selectSeason(i);
                dropdown.appendChild(option);
            }
        }
        
        function toggleSeasonDropdown() {
            document.getElementById('season-dropdown').classList.toggle('active');
        }
        
        function selectSeason(seasonNum) {
            currentSeason = seasonNum;
            document.getElementById('current-season-display').textContent = seasonNum;
            document.getElementById('season-dropdown').classList.remove('active');
            
            // Update active state in dropdown
            document.querySelectorAll('.season-option').forEach((el, idx) => {
                el.classList.toggle('active', idx + 1 === seasonNum);
            });
            
            // Re-render episodes panel
            renderEpisodesPanel(currentVideo, seasonNum);
            
            // Auto-play first episode of selected season
            playVideo(currentVideo, seasonNum, 1);
        }
        
        function toggleEpisodesPanel() {
            const panel = document.getElementById('episodes-panel');
            panel.classList.toggle('active');
        }
        
        function renderEpisodesPanel(movie, seasonNum) {
            const container = document.getElementById('episodes-list-container');
            const panelTitle = document.getElementById('episodes-panel-title');
            
            if (!movie.episodes) {
                container.innerHTML = '<p style="color: #999; text-align: center;">No episodes available</p>';
                return;
            }
            
            const seasonKey = `season${seasonNum}`;
            const episodes = movie.episodes[seasonKey] || [];
            
            panelTitle.textContent = `Season ${seasonNum} Episodes`;
            
            container.innerHTML = episodes.map((ep, idx) => `
                <div class="episode-item ${idx === currentEpisodeIndex ? 'playing' : ''}" onclick="playEpisode(${seasonNum}, ${idx + 1})">
                    <img src="${ep.thumbnail || movie.poster}" alt="${ep.title}" onerror="this.src='${movie.poster}'">
                    <div class="episode-info">
                        <h4>
                            <span>${idx + 1}. ${ep.title}</span>
                            <span class="episode-duration">${ep.duration}</span>
                        </h4>
                        <p>${ep.description || 'No description available'}</p>
                    </div>
                </div>
            `).join('');
        }
        
        function playEpisode(seasonNum, episodeNum) {
            currentEpisodeIndex = episodeNum - 1;
            playVideo(currentVideo, seasonNum, episodeNum);
            renderEpisodesPanel(currentVideo, seasonNum);
        }
        
        function setupVideoControls() {
            const overlay = document.getElementById('video-overlay');
            const player = document.getElementById('video-player');
            
            player.onmousemove = () => {
                overlay.classList.add('active');
                clearTimeout(mouseTimer);
                mouseTimer = setTimeout(() => {
                    if (!document.getElementById('episodes-panel').classList.contains('active')) {
                        overlay.classList.remove('active');
                    }
                }, 1000);
            };
            
            document.removeEventListener('keydown', handleVideoKeys);
            document.addEventListener('keydown', handleVideoKeys);
        }
        
        function handleVideoKeys(e) {
            if (!document.getElementById('video-player').classList.contains('active')) return;
            
            switch(e.key) {
                case ' ':
                case 'k':
                    e.preventDefault();
                    togglePlay();
                    break;
                case 'f':
                    toggleFullscreen();
                    break;
                case 'm':
                    toggleMute();
                    break;
                case 'ArrowRight':
                    seekForward();
                    break;
                case 'ArrowLeft':
                    seekBackward();
                    break;
                case 'Escape':
                    if (document.getElementById('episodes-panel').classList.contains('active')) {
                        toggleEpisodesPanel();
                    } else {
                        confirmExit();
                    }
                    break;
            }
        }
        
        function togglePlay() {
            isPlaying = !isPlaying;
            document.getElementById('play-pause-btn').textContent = isPlaying ? 'â¸' : 'â–¶';
        }
        
        function seek(e) {
            const bar = e.currentTarget;
            const rect = bar.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            videoProgress = Math.max(0, Math.min(100, percent * 100));
            updateProgress();
        }
        
        function updateProgress() {
            document.getElementById('progress-fill').style.width = videoProgress + '%';
            const current = formatTime(videoProgress * 90);
            const total = '1:30:00';
            document.getElementById('time-display').textContent = `${current} / ${total}`;
        }
        
        function formatTime(seconds) {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            if (hrs > 0) return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        function seekForward() {
            videoProgress = Math.min(100, videoProgress + 5);
            updateProgress();
        }
        
        function seekBackward() {
            videoProgress = Math.max(0, videoProgress - 5);
            updateProgress();
        }
        
        function toggleMute() {
            showNotification('Mute toggled', 'success');
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(() => {});
            } else {
                document.exitFullscreen().catch(() => {});
            }
        }
        
        function confirmExit() {
            document.getElementById('exit-confirm').classList.add('active');
        }
        
        function exitVideo() {
            const player = document.getElementById('video-player');
            const iframe = document.getElementById('video-iframe');
            
            if (currentVideo && videoProgress > 0) {
                updateContinueWatching(currentVideo.id, currentSeason, currentEpisodeIndex + 1, videoProgress);
            }
            
            iframe.src = '';
            player.classList.remove('active');
            document.getElementById('exit-confirm').classList.remove('active');
            document.getElementById('episodes-panel').classList.remove('active');
            document.removeEventListener('keydown', handleVideoKeys);
            
            if (videoProgress > 90) {
                addToAlreadyWatched(currentVideo, currentSeason, currentEpisodeIndex + 1);
            }
            
            currentVideo = null;
            currentEpisodes = {};
        }
        
        function cancelExit() {
            document.getElementById('exit-confirm').classList.remove('active');
        }
        
        function setVolume(e) {
            const slider = e.currentTarget;
            const rect = slider.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            document.getElementById('volume-fill').style.width = (percent * 100) + '%';
        }
        
        // ============================================
        // MOVIE DETAIL MODAL WITH SEASON/EPISODE
        // ============================================
        
        let detailCurrentSeason = 1;
        
        function showMovieDetail(movie) {
            currentDetailMovie = movie;
            detailCurrentSeason = 1;
            const modal = document.getElementById('movie-detail');
            
            document.getElementById('detail-header').style.backgroundImage = `url(${movie.backdrop})`;
            document.getElementById('detail-title').textContent = movie.title;
            document.getElementById('detail-meta').innerHTML = `
                <span class="match">${movie.match || 90}% Match</span>
                <span>${movie.year}</span>
                <span class="rating">${movie.rating}</span>
                <span>${movie.duration || (movie.seasons ? movie.seasons + ' Seasons' : '')}</span>
            `;
            document.getElementById('detail-description').textContent = movie.description;
            
            document.getElementById('cast-list').innerHTML = `
                <div class="cast-member">
                    <img src="https://ui-avatars.com/api/?name=Actor+One&background=random&size=80 " alt="Actor">
                    <span>Actor One</span>
                </div>
                <div class="cast-member">
                    <img src="https://ui-avatars.com/api/?name=Actor+Two&background=random&size=80 " alt="Actor">
                    <span>Actor Two</span>
                </div>
                <div class="cast-member">
                    <img src="https://ui-avatars.com/api/?name=Actor+Three&background=random&size=80 " alt="Actor">
                    <span>Actor Three</span>
                </div>
            `;
            
            const episodesSection = document.getElementById('episodes-section');
            if (movie.type === 'tv' && movie.episodes) {
                episodesSection.style.display = 'block';
                setupDetailSeasonDropdown(movie);
                renderDetailEpisodes(movie, 1);
            } else {
                episodesSection.style.display = 'none';
            }
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function setupDetailSeasonDropdown(movie) {
            const dropdown = document.getElementById('detail-season-dropdown');
            dropdown.innerHTML = '';
            
            if (!movie.episodes) return;
            
            const seasonCount = Object.keys(movie.episodes).length;
            
            for (let i = 1; i <= seasonCount; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = `Season ${i}`;
                dropdown.appendChild(option);
            }
        }
        
        function changeDetailSeason() {
            const dropdown = document.getElementById('detail-season-dropdown');
            detailCurrentSeason = parseInt(dropdown.value);
            renderDetailEpisodes(currentDetailMovie, detailCurrentSeason);
        }
        
        function renderDetailEpisodes(movie, seasonNum) {
            const container = document.getElementById('detail-episodes-list');
            const seasonKey = `season${seasonNum}`;
            const episodes = movie.episodes[seasonKey] || [];
            
            container.innerHTML = episodes.map((ep, idx) => `
                <div class="detail-episode-item" onclick="playDetailEpisode(${seasonNum}, ${idx + 1})">
                    <img src="${ep.thumbnail || movie.poster}" alt="${ep.title}" onerror="this.src='${movie.poster}'">
                    <div class="detail-episode-info">
                        <h4>
                            <span>${idx + 1}. ${ep.title}</span>
                            <span style="color: #999;">${ep.duration}</span>
                        </h4>
                        <p>${ep.description || 'No description available'}</p>
                    </div>
                </div>
            `).join('');
        }
        
        function playDetailEpisode(seasonNum, episodeNum) {
            closeMovieDetail();
            setTimeout(() => {
                if (currentDetailMovie) {
                    playVideo(currentDetailMovie, seasonNum, episodeNum);
                }
            }, 300);
        }
        
        function closeMovieDetail() {
            document.getElementById('movie-detail').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        function playDetail() {
            if (currentDetailMovie) {
                closeMovieDetail();
                setTimeout(() => playVideo(currentDetailMovie), 300);
            }
        }
        
        function addToList(movie = currentDetailMovie) {
            if (!movie) return;
            
            const myList = getProfileData('myList');
            if (!myList.find(m => m.id === movie.id)) {
                myList.push(movie);
                setProfileData('myList', myList);
                showNotification('Added to My List', 'success');
            } else {
                showNotification('Already in My List', 'error');
            }
        }
        
        // ============================================
        // PROFILE-SPECIFIC DATA FUNCTIONS
        // ============================================
        
        function addToContinueWatching(movie, season = 1, episode = 1, progress = 0) {
            let continueWatching = getProfileData('continueWatching');
            
            const existingIndex = continueWatching.findIndex(m => m.id === movie.id);
            const watchData = { 
                ...movie, 
                season, 
                episode, 
                progress,
                lastWatched: new Date().toISOString()
            };
            
            if (existingIndex !== -1) {
                continueWatching.splice(existingIndex, 1);
            }
            
            continueWatching.unshift(watchData);
            
            // Keep only last 20 items
            if (continueWatching.length > 20) {
                continueWatching = continueWatching.slice(0, 20);
            }
            
            setProfileData('continueWatching', continueWatching);
        }
        
        function updateContinueWatching(id, season, episode, progress) {
            let continueWatching = getProfileData('continueWatching');
            const movie = continueWatching.find(m => m.id === id);
            
            if (movie) {
                movie.season = season;
                movie.episode = episode;
                movie.progress = progress;
                movie.lastWatched = new Date().toISOString();
                setProfileData('continueWatching', continueWatching);
            }
        }
        
        function addToAlreadyWatched(movie, season = 1, episode = 1) {
            let alreadyWatched = getProfileData('alreadyWatched');
            
            if (!alreadyWatched.find(m => m.id === movie.id && m.season === season && m.episode === episode)) {
                alreadyWatched.unshift({
                    ...movie,
                    season,
                    episode,
                    watchedAt: new Date().toISOString()
                });
                setProfileData('alreadyWatched', alreadyWatched);
                
                // Remove from continue watching
                let continueWatching = getProfileData('continueWatching');
                continueWatching = continueWatching.filter(m => !(m.id === movie.id && m.season === season && m.episode === episode));
                setProfileData('continueWatching', continueWatching);
            }
        }
        
        // ============================================
        // SEARCH
        // ============================================
        
        const searchInput = document.getElementById('search-input');
        const autocomplete = document.getElementById('search-autocomplete');
        
        searchInput.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            if (query.length < 2) {
                autocomplete.classList.remove('active');
                return;
            }
            
            const allMovies = getAllMovies();
            const results = allMovies.filter(m => 
                m.title.toLowerCase().includes(query) || 
                m.genres?.some(g => g.toLowerCase().includes(query))
            ).slice(0, 5);
            
            if (results.length === 0) {
                autocomplete.innerHTML = '<div class="search-suggestion"><span>No results found</span></div>';
            } else {
                autocomplete.innerHTML = results.map(m => `
                    <div class="search-suggestion" onclick="playVideoById('${m.id}'); document.getElementById('search-autocomplete').classList.remove('active');">
                        <img src="${m.poster}" alt="${m.title}" onerror="this.src='https://via.placeholder.com/40x60/333/fff?text=? '">
                        <div>
                            <div style="font-weight: 600;">${m.title}</div>
                            <div style="font-size: 12px; color: #999;">${m.year} â€¢ ${m.type === 'tv' ? 'TV Show' : 'Movie'}</div>
                        </div>
                    </div>
                `).join('');
            }
            
            autocomplete.classList.add('active');
        });
        
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-container')) {
                autocomplete.classList.remove('active');
            }
        });
        
        // ============================================
        // GENRE FILTER
        // ============================================
        
        document.querySelectorAll('.genre-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.genre-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const genre = btn.dataset.genre;
                filterByGenre(genre);
            });
        });
        
        function filterByGenre(genre) {
            if (genre === 'all') {
                renderContentRows();
                return;
            }
            
            const allMovies = getAllMovies();
            const filtered = allMovies.filter(m => m.genres?.includes(genre));
            
            const container = document.getElementById('content-rows');
            container.innerHTML = '';
            container.appendChild(createContentRow(genre.charAt(0).toUpperCase() + genre.slice(1), filtered));
            
            addCursorHover();
        }
        
        // ============================================
        // NAVIGATION
        // ============================================
        
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelectorAll('.nav-links a').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                const section = link.dataset.section;
                handleNavigation(section);
            });
        });
        
        function handleNavigation(section) {
            document.getElementById('search-input').value = '';
            document.getElementById('search-autocomplete').classList.remove('active');
            
            switch(section) {
                case 'home':
                    renderContentRows();
                    break;
                case 'tv-shows':
                    filterByType('tv');
                    break;
                case 'movies':
                    filterByType('movie');
                    break;
                case 'new':
                    showNewReleases();
                    break;
                case 'my-list':
                    showMyList();
                    break;
                case 'continue-watching':
                    showContinueWatching();
                    break;
                case 'watched':
                    showWatched();
                    break;
            }
        }
        
        function filterByType(type) {
            const allMovies = getAllMovies();
            const filtered = allMovies.filter(m => m.type === type);
            
            const container = document.getElementById('content-rows');
            container.innerHTML = '';
            container.appendChild(createContentRow(type === 'tv' ? 'TV Shows' : 'Movies', filtered));
            
            addCursorHover();
        }
        
        function showNewReleases() {
            const container = document.getElementById('content-rows');
            container.innerHTML = '';
            container.appendChild(createContentRow('New Releases', movieData.newReleases));
            addCursorHover();
        }
        
        function showMyList() {
            const myList = getProfileData('myList');
            const container = document.getElementById('content-rows');
            
            if (myList.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>Your list is empty</h3>
                        <p>Add movies and TV shows to your list to watch later</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            container.appendChild(createContentRow('My List', myList));
            addCursorHover();
        }
        
        function showContinueWatching() {
            const continueWatching = getProfileData('continueWatching');
            const container = document.getElementById('content-rows');
            
            if (continueWatching.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>Nothing to continue</h3>
                        <p>Start watching something and it will appear here</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            container.appendChild(createContentRow('Continue Watching', continueWatching, true));
            addCursorHover();
        }
        
        function showWatched() {
            const alreadyWatched = getProfileData('alreadyWatched');
            const container = document.getElementById('content-rows');
            
            if (alreadyWatched.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <h3>No watched titles</h3>
                        <p>Complete watching movies or episodes to see them here</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            container.appendChild(createContentRow('Already Watched', alreadyWatched));
            addCursorHover();
        }
        
        // ============================================
        // NOTIFICATIONS
        // ============================================
        
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = type;
            notification.classList.add('active');
            
            setTimeout(() => {
                notification.classList.remove('active');
            }, 3000);
        }
        
        // ============================================
        // PROFILE MENU
        // ============================================
        
        document.getElementById('profile-btn').addEventListener('click', (e) => {
            e.stopPropagation();
            document.getElementById('profile-dropdown').classList.toggle('active');
        });
        
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.profile-menu')) {
                document.getElementById('profile-dropdown').classList.remove('active');
            }
        });
        
        function openAccount() {
            showNotification('Account settings coming soon!', 'info');
        }
        
        function openHelp() {
            showNotification('Help center coming soon!', 'info');
        }
        
        function signOut() {
            currentUser = null;
            currentProfile = null;
            localStorage.removeItem('user');
            location.reload();
        }
        
        // ============================================
        // HEADER SCROLL EFFECT
        // ============================================
        
        window.addEventListener('scroll', () => {
            const header = document.getElementById('main-header');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
        });
        
        // ============================================
        // SETUP EVENT LISTENERS
        // ============================================
        
        function setupEventListeners() {
            document.getElementById('movie-detail').addEventListener('click', (e) => {
                if (e.target.id === 'movie-detail') {
                    closeMovieDetail();
                }
            });
        }
        
        // ============================================
        // INITIALIZE
        // ============================================
        
        window.addEventListener('DOMContentLoaded', () => {
            playIntro();
        });
    </script>
    <script src="main.js"></script>
</body>
</html>
